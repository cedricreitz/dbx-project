{
  "name": "automated_dbt_pipeline",
  "tasks": [
    {
      "task_key": "run_bronze_source_1_table_1",
      "description": "Run dbt model: bronze.source_1.table_1",
      "new_cluster": {
        "spark_version": "13.3.x-scala2.12",
        "node_type_id": "i3.xlarge",
        "num_workers": 2,
        "spark_conf": {
          "spark.databricks.delta.preview.enabled": "true"
        }
      },
      "python_wheel_task": {
        "package_name": "dbt-databricks",
        "entry_point": "dbt",
        "parameters": [
          "run",
          "--select",
          "bronze.source_1.table_1",
          "--profiles-dir",
          "/dbfs/FileStore/dbt",
          "--project-dir",
          "/dbfs/FileStore/dbt"
        ]
      },
      "timeout_seconds": 3600,
      "max_retries": 2,
      "min_retry_interval_millis": 10000
    },
    {
      "task_key": "run_bronze_source_2_table_1",
      "description": "Run dbt model: bronze.source_2.table_1",
      "depends_on": [
        {
          "task_key": "run_dbx_project_bronze_source_1_table_1"
        }
      ],
      "new_cluster": {
        "spark_version": "13.3.x-scala2.12",
        "node_type_id": "i3.xlarge",
        "num_workers": 2,
        "spark_conf": {
          "spark.databricks.delta.preview.enabled": "true"
        }
      },
      "python_wheel_task": {
        "package_name": "dbt-databricks",
        "entry_point": "dbt",
        "parameters": [
          "run",
          "--select",
          "bronze.source_2.table_1",
          "--profiles-dir",
          "/dbfs/FileStore/dbt",
          "--project-dir",
          "/dbfs/FileStore/dbt"
        ]
      },
      "timeout_seconds": 3600,
      "max_retries": 2,
      "min_retry_interval_millis": 10000
    }
  ],
  "email_notifications": {
    "on_failure": [
      "your-email@company.com"
    ],
    "on_success": [
      "your-email@company.com"
    ]
  },
  "timeout_seconds": 14400,
  "max_concurrent_runs": 1
}